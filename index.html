<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Optimizaci√≥n del Patrimonio</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js">
document.getElementById("aportacionDCA").addEventListener("input", function() {
    let dcaBlock = document.getElementById("dcaBlock");
    if (this.value && parseFloat(this.value) > 0) {
        dcaBlock.style.display = "block";
    } else {
        dcaBlock.style.display = "none";
    }
});

\1
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .input-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .input-field {
            display: flex;
            flex-direction: column;
        }

        .input-field label {
            font-weight: 600;
            margin-bottom: 8px;
            color: #555;
        }

        .input-field input, .input-field select {
            padding: 12px 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .input-field input:focus, .input-field select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .asset-input {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 10px;
            align-items: end;
        }

        .asset-input input[type="number"] {
            margin: 0;
        }

        .yield-input {
            position: relative;
        }

        .yield-input input {
            padding-right: 25px;
        }

        .yield-input::after {
            content: '%';
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #666;
            pointer-events: none;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            color: #333;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-secondary:hover {
            transform: translateY(-1px);
            box-shadow: 0 5px 15px rgba(252, 182, 159, 0.3);
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .close {
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close:hover {
            color: #667eea;
        }

        .dca-distribution {
            display: grid;
            gap: 15px;
        }

        .dca-item {
            display: grid;
            grid-template-columns: 2fr 1fr auto;
            gap: 10px;
            align-items: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .dca-item input {
            margin: 0;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
        }

        .score-card {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
            border-radius: 20px;
            position: relative;
            overflow: hidden;
        }

        .score-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: pulse 3s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .score-number {
            font-size: 4rem;
            font-weight: bold;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }

        .score-text {
            font-size: 1.2rem;
            position: relative;
            z-index: 1;
        }

        .chart-container {
            position: relative;
            height: 400px;
            margin: 30px 0;
        }

        .allocation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .allocation-item {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .allocation-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(240, 147, 251, 0.3);
        }

        .allocation-item h4 {
            font-size: 1.1rem;
            margin-bottom: 10px;
        }

        .allocation-item .amount {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .allocation-item .percentage {
            opacity: 0.8;
            font-size: 0.9rem;
        }

        .allocation-item .yield {
            opacity: 0.9;
            font-size: 0.8rem;
            margin-top: 5px;
        }

        .recommendation {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            padding: 25px;
            border-radius: 15px;
            border-left: 5px solid #ff6b6b;
            margin: 20px 0;
        }

        .recommendation h4 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .recommendation ul {
            color: #555;
            padding-left: 20px;
        }

        .recommendation li {
            margin: 8px 0;
            line-height: 1.6;
        }

        .emergency-fund-status {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            border-left: 5px solid #28a745;
        }

        .emergency-fund-status.warning {
            border-left-color: #ffc107;
            background: #fff3cd;
        }

        .emergency-fund-status.danger {
            border-left-color: #dc3545;
            background: #f8d7da;
        }

        .total-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 10px 15px;
            border-radius: 10px;
            font-weight: bold;
            z-index: 999;
            transition: all 0.3s ease;
        }

        .dca-indicator {
            margin-top: 10px;
            padding: 10px;
            background: #e3f2fd;
            border-radius: 8px;
            border-left: 4px solid #2196f3;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .input-group {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .results-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .allocation-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .score-number {
                font-size: 3rem;
            }

            .asset-input {
                grid-template-columns: 1fr;
                gap: 5px;
            }

            .modal-content {
                width: 95%;
                margin: 10% auto;
                padding: 20px;
            }

            .dca-item {
                grid-template-columns: 1fr;
                gap: 10px;
            }
        }

        .hidden {
            display: none;
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üí∞ Optimizaci√≥n del Patrimonio</h1>
            <p>Analiza y optimiza tu gesti√≥n de efectivo e inversiones</p>
        </div>

        <div class="card">
            <h2>üìä Datos Financieros</h2>
            <form id="patrimonioForm">
                <div class="input-group">
                    <div class="input-field">
                        <label for="gastosMensuales">Gastos Mensuales (‚Ç¨)</label>
                        <input type="number" id="gastosMensuales" min="0" step="50" placeholder="2500">
                    </div>
                    <div class="input-field">
                        <label for="perfilRiesgo">Perfil de Riesgo</label>
                        <select id="perfilRiesgo">
                            <option value="conservador">Conservador (6-12 meses)</option>
                            <option value="agresivo">Agresivo (3-6 meses)</option>
                        </select>
                    </div>
                    <div class="input-field">
                        <label for="inflacion">üìä Inflaci√≥n Esperada (%)</label>
                        <div class="yield-input">
                            <input type="number" id="inflacion" value="3.5" step="0.1" min="0" max="15">
                        </div>
                        <small style="color: #666; margin-top: 5px;">Afecta el poder adquisitivo real de tu patrimonio</small>
                    </div>
                    <div class="input-field">
                        <label for="dcaAmount">DCA Mensual Total (‚Ç¨)</label>
                        <input type="number" id="dcaAmount" min="0" step="50" placeholder="500">
                        <button type="button" id="configureDCA" class="btn-secondary" style="margin-top: 10px;">
                            üìã Configurar distribuci√≥n DCA
                        </button>
                        <div id="dcaIndicator" class="dca-indicator hidden">
                            <strong>DCA configurado:</strong> <span id="dcaConfiguredAmount">0‚Ç¨</span>
                        </div>
                    </div>
                </div>

                <div class="card" style="background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%); margin-bottom: 20px;">
                    <h3>‚ö° An√°lisis R√°pido</h3>
                    <div class="input-group">
                        <div class="input-field">
                            <label for="ingresosMensuales">üí∞ Ingresos Netos Mensuales (‚Ç¨)</label>
                            <input type="number" id="ingresosMensuales" min="0" step="100" placeholder="4000">
                            <small style="color: #666;">Para calcular tu tasa de ahorro y capacidad de inversi√≥n</small>
                        </div>
                        <div class="input-field">
                            <label for="edadActual">üéÇ Edad Actual</label>
                            <input type="number" id="edadActual" min="18" max="100" step="1" placeholder="35">
                            <small style="color: #666;">Para proyecciones de jubilaci√≥n</small>
                        </div>
                        <div class="input-field">
                            <label for="objetivoJubilacion">üèñÔ∏è Objetivo Jubilaci√≥n (‚Ç¨)</label>
                            <input type="number" id="objetivoJubilacion" min="0" step="10000" placeholder="800000">
                            <small style="color: #666;">Patrimonio deseado para jubilarte</small>
                        </div>
                    </div>
                </div>

                <h3>üíº Distribuci√≥n Actual del Patrimonio</h3>
                <div class="input-group">
                    <div class="input-field">
                        <label>üè¶ Cuenta Corriente (0% - Gastos diarios)</label>
                        <div class="asset-input">
                            <input type="number" id="cuentaCorriente" min="0" step="100" placeholder="5000">
                            <div class="yield-input">
                                <input type="number" id="yieldCuentaCorriente" value="0" step="0.1" readonly style="background: #f5f5f5;">
                            </div>
                        </div>
                    </div>
                    <div class="input-field">
                        <label>üí≥ Cuenta Remunerada</label>
                        <div class="asset-input">
                            <input type="number" id="cuentaRemunerada" min="0" step="100" placeholder="10000">
                            <div class="yield-input">
                                <input type="number" id="yieldCuentaRemunerada" value="2.0" step="0.1" min="0" max="10">
                            </div>
                        </div>
                    </div>
                    <div class="input-field">
                        <label>üèõÔ∏è Renta Fija</label>
                        <div class="asset-input">
                            <input type="number" id="rentaFija" min="0" step="100" placeholder="15000">
                            <div class="yield-input">
                                <input type="number" id="yieldRentaFija" value="4.0" step="0.1" min="0" max="15">
                            </div>
                        </div>
                    </div>
                    <div class="input-field">
                        <label>üìà Renta Variable</label>
                        <div class="asset-input">
                            <input type="number" id="rentaVariable" min="0" step="100" placeholder="20000">
                            <div class="yield-input">
                                <input type="number" id="yieldRentaVariable" value="8.0" step="0.1" min="0" max="20">
                            </div>
                        </div>
                    </div>
                    <div class="input-field">
                        <label>üè† Inmobiliario</label>
                        <div class="asset-input">
                            <input type="number" id="inmobiliario" min="0" step="100" placeholder="8000">
                            <div class="yield-input">
                                <input type="number" id="yieldInmobiliario" value="6.0" step="0.1" min="0" max="15">
                            </div>
                        </div>
                    </div>
                    <div class="input-field">
                        <label>‚Çø Criptomonedas</label>
                        <div class="asset-input">
                            <input type="number" id="criptomonedas" min="0" step="100" placeholder="2000">
                            <div class="yield-input">
                                <input type="number" id="yieldCriptomonedas" value="15.0" step="0.5" min="0" max="50">
                            </div>
                        </div>
                    </div>
                </div>

                <div id="totalPatrimonioIndicator" class="total-indicator hidden">
                    üí∞ Patrimonio Total: 0‚Ç¨
                </div>

                <h3>üéØ Preferencia de Inversi√≥n</h3>
                <div class="input-field">
                    <label for="preferenciaInversion">¬øD√≥nde prefieres invertir?</label>
                    <select id="preferenciaInversion">
                        <option value="renta-variable">Renta Variable (Acciones/Fondos indexados)</option>
                        <option value="renta-fija">Renta Fija</option>
                        <option value="inmobiliario">Inmobiliario</option>
                        <option value="criptomonedas">Criptomonedas</option>
                        <option value="diversificado">Portfolio diversificado</option>
                    </select>
                </div>

                <button type="submit" class="btn-primary">üîç Analizar Patrimonio</button>
            </form>
        </div>

        <!-- Modal para configurar DCA -->
        <div id="dcaModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>üìã Configurar Distribuci√≥n DCA</h3>
                    <span class="close">&times;</span>
                </div>
                <p>Especifica c√≥mo quieres distribuir tu DCA mensual entre los diferentes activos:</p>
                <div id="dcaDistribution" class="dca-distribution">
                    <!-- Se llena din√°micamente -->
                </div>
                <div style="margin-top: 20px; padding: 15px; background: #f0f7ff; border-radius: 10px;">
                    <strong>Total DCA:</strong> <span id="totalDCAModal">0‚Ç¨</span> / <span id="targetDCAModal">0‚Ç¨</span>
                </div>
                <button type="button" id="saveDCA" class="btn-primary" style="margin-top: 20px;">
                    üíæ Guardar configuraci√≥n DCA
                </button>
            </div>
        </div>

        <div id="resultados" class="hidden">
            <div class="results-grid">
                <div class="card">
                    <div class="score-card">
                        <div class="score-number" id="scoreNumber">0</div>
                        <div class="score-text">Puntuaci√≥n de Optimizaci√≥n</div>
                    </div>
                </div>

                <div class="card">
                    <h3>üìà Crecimiento Patrimonial</h3>
                    <div class="chart-container">
                        <canvas id="growthChart"></canvas>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3>üè¶ Fondo de Emergencia</h3>
                <div id="emergencyFundStatus"></div>
            </div>

            <div class="card">
                <h3>üìä Distribuci√≥n del Patrimonio</h3>
                <div class="allocation-grid" id="allocationGrid"></div>
                <div class="chart-container">
                    <canvas id="allocationChart"></canvas>
                </div>
            </div>

            <div class="card">
                <h3>üí° Recomendaciones Personalizadas</h3>
                <div id="recommendations"></div>
            </div>

            <div class="card">
                <h3>üí∞ An√°lisis DCA</h3>
                <div id="dcaAnalysis"></div>
            </div>

            <div class="card">
                <h3>üéØ Opini√≥n sobre tu Preferencia de Inversi√≥n</h3>
                <div id="investmentOpinion"></div>
            </div>

            <div class="card">
                <h3>üìä M√©tricas Financieras Clave</h3>
                <div id="metricas" class="allocation-grid"></div>
            </div>

            <div class="card">
                <h3>üéØ An√°lisis de Independencia Financiera</h3>
                <div id="independenciaFinanciera"></div>
            </div>

            <div class="card">
                <h3>üí° Simulador de Escenarios</h3>
                <div id="simuladorEscenarios">
                    <div class="input-group">
                        <div class="input-field">
                            <label>üìà Escenario Optimista (+2% rentabilidad)</label>
                            <button type="button" class="btn-secondary" onclick="simularEscenario('optimista')">Simular</button>
                        </div>
                        <div class="input-field">
                            <label>üìâ Escenario Pesimista (-2% rentabilidad)</label>
                            <button type="button" class="btn-secondary" onclick="simularEscenario('pesimista')">Simular</button>
                        </div>
                        <div class="input-field">
                            <label>üí• Crisis Econ√≥mica (50% ca√≠da inicial)</label>
                            <button type="button" class="btn-secondary" onclick="simularEscenario('crisis')">Simular</button>
                        </div>
                    </div>
                    <div id="resultadoEscenario" class="hidden"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let growthChart = null;
        let allocationChart = null;
        let dcaDistribution = {};

        // Event listeners principales
        document.getElementById('patrimonioForm').addEventListener('submit', function(e) {
            e.preventDefault();
            analizarPatrimonio();
        });

        document.getElementById('configureDCA').addEventListener('click', abrirModalDCA);
        document.getElementById('saveDCA').addEventListener('click', guardarConfiguracionDCA);
        
        // Modal eventos
        const modal = document.getElementById('dcaModal');
        const span = document.getElementsByClassName('close')[0];
        
        span.onclick = function() {
            modal.style.display = 'none';
        }
        
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        }

        // Actualizar patrimonio total en tiempo real
        const patrimonioInputs = ['cuentaCorriente', 'cuentaRemunerada', 'rentaFija', 'rentaVariable', 'inmobiliario', 'criptomonedas'];
        
        patrimonioInputs.forEach(id => {
            document.getElementById(id).addEventListener('input', actualizarPatrimonioTotal);
        });

        function actualizarPatrimonioTotal() {
            let total = 0;
            patrimonioInputs.forEach(id => {
                const valor = parseFloat(document.getElementById(id).value) || 0;
                total += valor;
            });

            const indicator = document.getElementById('totalPatrimonioIndicator');
            indicator.classList.remove('hidden');
            indicator.textContent = `üí∞ Patrimonio Total: ${total.toLocaleString()}‚Ç¨`;
            
            if (total > 0) {
                indicator.style.background = 'rgba(40, 167, 69, 0.9)';
            } else {
                indicator.style.background = 'rgba(220, 53, 69, 0.9)';
            }
        }

        function abrirModalDCA() {
            const dcaTotal = parseFloat(document.getElementById('dcaAmount').value) || 0;
            if (dcaTotal === 0) {
                alert('Por favor, introduce primero el monto total de DCA mensual');
                return;
            }

            // Inicializar distribuci√≥n si est√° vac√≠a
            if (Object.keys(dcaDistribution).length === 0) {
                dcaDistribution = {
                    cuentaRemunerada: 0,
                    rentaFija: 0,
                    rentaVariable: 0,
                    inmobiliario: 0,
                    criptomonedas: 0
                };
            }

            const container = document.getElementById('dcaDistribution');
            const labels = {
                cuentaRemunerada: 'üí≥ Cuenta Remunerada',
                rentaFija: 'üèõÔ∏è Renta Fija',
                rentaVariable: 'üìà Renta Variable',
                inmobiliario: 'üè† Inmobiliario',
                criptomonedas: '‚Çø Criptomonedas'
            };

            container.innerHTML = '';
            
            for (let key in dcaDistribution) {
                const div = document.createElement('div');
                div.className = 'dca-item';
                div.innerHTML = `
                    <label>${labels[key]}</label>
                    <input type="number" 
                           id="dca_${key}" 
                           value="${dcaDistribution[key]}" 
                           min="0" 
                           step="10" 
                           placeholder="0">
                    <span style="color: #666;">‚Ç¨/mes</span>
                `;
                container.appendChild(div);
                
                // Event listener para actualizar total
                document.getElementById(`dca_${key}`).addEventListener('input', actualizarTotalDCAModal);
            }

            document.getElementById('targetDCAModal').textContent = dcaTotal + '‚Ç¨';
            actualizarTotalDCAModal();
            modal.style.display = 'block';
        }

        function actualizarTotalDCAModal() {
            let total = 0;
            for (let key in dcaDistribution) {
                const input = document.getElementById(`dca_${key}`);
                if (input) {
                    const valor = parseFloat(input.value) || 0;
                    total += valor;
                }
            }
            document.getElementById('totalDCAModal').textContent = total + '‚Ç¨';
            
            const targetDCA = parseFloat(document.getElementById('dcaAmount').value) || 0;
            const totalElement = document.getElementById('totalDCAModal');
            
            if (Math.abs(total - targetDCA) < 1) {
                totalElement.style.color = '#28a745';
            } else {
                totalElement.style.color = '#dc3545';
            }
        }

        function guardarConfiguracionDCA() {
            const targetDCA = parseFloat(document.getElementById('dcaAmount').value) || 0;
            let total = 0;
            
            for (let key in dcaDistribution) {
                const input = document.getElementById(`dca_${key}`);
                if (input) {
                    dcaDistribution[key] = parseFloat(input.value) || 0;
                    total += dcaDistribution[key];
                }
            }
            
            if (Math.abs(total - targetDCA) > 1) {
                alert(`El total de la distribuci√≥n DCA (${total}‚Ç¨) no coincide con el monto total (${targetDCA}‚Ç¨)`);
                return;
            }
            
            // Mostrar indicador
            const indicator = document.getElementById('dcaIndicator');
            const amount = document.getElementById('dcaConfiguredAmount');
            
            indicator.classList.remove('hidden');
            amount.textContent = total + '‚Ç¨';
            
            modal.style.display = 'none';
            alert('Configuraci√≥n DCA guardada correctamente');
        }

        function analizarPatrimonio() {
            // Obtener datos del formulario
            const gastosMensuales = parseFloat(document.getElementById('gastosMensuales').value) || 0;
            const perfilRiesgo = document.getElementById('perfilRiesgo').value;
            const dcaAmount = parseFloat(document.getElementById('dcaAmount').value) || 0;
            const inflacion = parseFloat(document.getElementById('inflacion').value) / 100 || 0.035;
            
            // Nuevos datos
            const ingresosMensuales = parseFloat(document.getElementById('ingresosMensuales').value) || 0;
            const edadActual = parseFloat(document.getElementById('edadActual').value) || 35;
            const objetivoJubilacion = parseFloat(document.getElementById('objetivoJubilacion').value) || 0;
            
            // Distribuci√≥n actual en euros
            const distribucion = {};
            const yields = {};
            let patrimonioTotal = 0;
            
            patrimonioInputs.forEach(id => {
                const valor = parseFloat(document.getElementById(id).value) || 0;
                const yield = parseFloat(document.getElementById('yield' + id.charAt(0).toUpperCase() + id.slice(1)).value) || 0;
                
                distribucion[id] = valor;
                yields[id] = yield;
                patrimonioTotal += valor;
            });

            if (patrimonioTotal === 0) {
                alert('Por favor, introduce al menos alg√∫n valor en tu patrimonio');
                return;
            }

            // Convertir a porcentajes para an√°lisis
            const distribucionPorcentaje = {};
            for (let key in distribucion) {
                distribucionPorcentaje[key] = (distribucion[key] / patrimonioTotal) * 100;
            }

            const preferencia = document.getElementById('preferenciaInversion').value;

            // Calcular an√°lisis
            const analysis = calcularAnalisis(
                patrimonioTotal, gastosMensuales, perfilRiesgo, distribucion, 
                distribucionPorcentaje, yields, dcaAmount, dcaDistribution, preferencia,
                inflacion, ingresosMensuales, edadActual, objetivoJubilacion
            );
            
            // Mostrar resultados
            mostrarResultados(analysis);
        }

        function calcularAnalisis(patrimonio, gastosMensuales, perfil, distribucion, distribucionPorcentaje, yields, dca, dcaDistr, preferencia, inflacion, ingresosMensuales, edadActual, objetivoJubilacion) {
            // Calcular fondo de emergencia necesario
            const mesesEmergencia = perfil === 'conservador' ? 9 : 4.5;
            const fondoEmergenciaNecesario = gastosMensuales * mesesEmergencia;
            
            // Calcular efectivo actual (cuenta corriente + remunerada)
            const efectivoActual = distribucion.cuentaCorriente + distribucion.cuentaRemunerada;
            
            // Calcular rentabilidad ponderada
            let rentabilidadPonderada = 0;
            for (let key in distribucionPorcentaje) {
                rentabilidadPonderada += (distribucionPorcentaje[key] * yields[key]) / 100;
            }
            rentabilidadPonderada = rentabilidadPonderada / 100; // Convertir a decimal

            // Calcular m√©tricas financieras
            const metricas = calcularMetricas(patrimonio, ingresosMensuales, gastosMensuales, dca, rentabilidadPonderada, inflacion);
            
            // An√°lisis de independencia financiera
            const independencia = calcularIndependenciaFinanciera(patrimonio, gastosMensuales, rentabilidadPonderada, dca, edadActual, objetivoJubilacion, inflacion);

            // Calcular puntuaci√≥n
            const score = calcularPuntuacion(patrimonio, gastosMensuales, perfil, distribucionPorcentaje, efectivoActual, fondoEmergenciaNecesario, yields, metricas);
            
            // Generar recomendaciones
            const recommendations = generarRecomendaciones(patrimonio, gastosMensuales, perfil, distribucion, distribucionPorcentaje, efectivoActual, fondoEmergenciaNecesario, yields, preferencia, metricas);
            
            // An√°lisis DCA
            const dcaAnalysis = analizarDCA(dca, dcaDistr, patrimonio, preferencia, yields);
            
            // Opini√≥n sobre preferencia
            const investmentOpinion = generarOpinionInversion(preferencia, distribucionPorcentaje, yields);

            return {
                patrimonio,
                gastosMensuales,
                perfil,
                distribucion,
                distribucionPorcentaje,
                yields,
                fondoEmergenciaNecesario,
                efectivoActual,
                score,
                recommendations,
                dcaAnalysis,
                investmentOpinion,
                dca,
                dcaDistribution: dcaDistr,
                preferencia,
                rentabilidadPonderada,
                inflacion,
                ingresosMensuales,
                edadActual,
                objetivoJubilacion,
                metricas,
                independencia
            };
        }

        function calcularMetricas(patrimonio, ingresosMensuales, gastosMensuales, dca, rentabilidadPonderada, inflacion) {
            const tasaAhorro = ingresosMensuales > 0 ? ((ingresosMensuales - gastosMensuales) / ingresosMensuales) * 100 : 0;
            const rentabilidadReal = rentabilidadPonderada - inflacion;
            const multiploPorIngresos = ingresosMensuales > 0 ? patrimonio / (ingresosMensuales * 12) : 0;
            const yearsToDoubleWealth = rentabilidadReal > 0 ? Math.log(2) / Math.log(1 + rentabilidadReal) : 0;
            const capacidadInversion = ingresosMensuales > 0 ? ingresosMensuales - gastosMensuales : 0;
            const utilizacionCapacidad = capacidadInversion > 0 ? (dca / capacidadInversion) * 100 : 0;
            
            return {
                tasaAhorro,
                rentabilidadReal: rentabilidadReal * 100,
                multiploPorIngresos,
                yearsToDoubleWealth,
                capacidadInversion,
                utilizacionCapacidad,
                rentabilidadNominal: rentabilidadPonderada * 100
            };
        }

        function calcularIndependenciaFinanciera(patrimonio, gastosMensuales, rentabilidad, dca, edadActual, objetivoJubilacion, inflacion) {
            const gastosAnuales = gastosMensuales * 12;
            const patrimonioFIRE = gastosAnuales * 25; // Regla 4%
            const porcentajeFIRE = (patrimonio / patrimonioFIRE) * 100;
            
            // Calcular a√±os hasta FIRE con DCA
            let patrimonioTemp = patrimonio;
            let a√±os = 0;
            const rentabilidadReal = rentabilidad - inflacion;
            
            if (rentabilidadReal > 0 && dca > 0) {
                while (patrimonioTemp < patrimonioFIRE && a√±os < 50) {
                    patrimonioTemp = patrimonioTemp * (1 + rentabilidadReal) + (dca * 12);
                    a√±os++;
                }
            }
            
            const edadFIRE = a√±os < 50 ? edadActual + a√±os : null;
            
            // An√°lisis para objetivo de jubilaci√≥n personalizado
            let a√±osObjetivo = 0;
            let patrimonioObjetivo = patrimonio;
            
            if (objetivoJubilacion > 0 && rentabilidadReal > 0 && dca > 0) {
                while (patrimonioObjetivo < objetivoJubilacion && a√±osObjetivo < 50) {
                    patrimonioObjetivo = patrimonioObjetivo * (1 + rentabilidadReal) + (dca * 12);
                    a√±osObjetivo++;
                }
            }
            
            const edadObjetivo = a√±osObjetivo < 50 ? edadActual + a√±osObjetivo : null;
            
            return {
                patrimonioFIRE,
                porcentajeFIRE,
                a√±osHastaFIRE: a√±os < 50 ? a√±os : null,
                edadFIRE,
                objetivoJubilacion,
                a√±osHastaObjetivo: a√±osObjetivo < 50 ? a√±osObjetivo : null,
                edadObjetivo,
                rentaAnualPasiva: patrimonio * 0.04 // Regla 4%
            };
        }

        
function calcularPuntuacion(patrimonio, gastosMensuales, perfil, distribucionPorcentaje, efectivoActual, fondoEmergenciaNecesario, yields, metricas) {
    let score = 0;

    // Fondo de emergencia (25 puntos)
    if (efectivoActual >= fondoEmergenciaNecesario) {
        score += 25;
    } else if (efectivoActual >= fondoEmergenciaNecesario * 0.7) {
        score += 18;
    } else if (efectivoActual >= fondoEmergenciaNecesario * 0.5) {
        score += 10;
    }

    // Diversificaci√≥n (20 puntos)
    const numInversiones = Object.values(distribucionPorcentaje).filter(val => val > 0).length;
    if (numInversiones >= 5) score += 20;
    else if (numInversiones >= 4) score += 16;
    else if (numInversiones >= 3) score += 12;
    else score += 5;

    // Renta variable (20 puntos)
    if (distribucionPorcentaje.rentaVariable >= 20 && distribucionPorcentaje.rentaVariable <= 60) {
        score += 20;
    } else if (distribucionPorcentaje.rentaVariable >= 10) {
        score += 15;
    } else {
        score += 5;
    }

    // Tasa de ahorro (15 puntos)
    if (metricas.tasaAhorro >= 30) {
        score += 15;
    } else if (metricas.tasaAhorro >= 20) {
        score += 12;
    } else if (metricas.tasaAhorro >= 10) {
        score += 8;
    } else if (metricas.tasaAhorro > 0) {
        score += 4;
    }

    // Renta fija (10 puntos)
    if (distribucionPorcentaje.rentaFija >= 15 && distribucionPorcentaje.rentaFija <= 40) {
        score += 10;
    } else if (distribucionPorcentaje.rentaFija >= 10) {
        score += 7;
    } else {
        score += 3;
    }

    // Control de riesgo (10 puntos)
    if (distribucionPorcentaje.criptomonedas <= 10) {
        score += 10;
    } else if (distribucionPorcentaje.criptomonedas <= 15) {
        score += 5;
    }

    // Bonus por rentabilidades realistas
    let rentabilidadRealista = true;
    if (yields.cuentaRemunerada > 5 || yields.rentaFija > 6 || yields.rentaVariable > 12 || yields.criptomonedas > 25) {
        rentabilidadRealista = false;
    }
    if (rentabilidadRealista) score += 5;

    // Bonus por utilizaci√≥n eficiente de la capacidad de inversi√≥n
    if (metricas.utilizacionCapacidad >= 80) {
        score += 5;
    } else if (metricas.utilizacionCapacidad >= 60) {
        score += 3;
    }

    return Math.min(score, 100);
}


        function generarRecomendaciones(patrimonio, gastosMensuales, perfil, distribucion, distribucionPorcentaje, efectivoActual, fondoEmergenciaNecesario, yields, preferencia, metricas) {
            const recomendaciones = [];

            // Fondo de emergencia
            if (efectivoActual < fondoEmergenciaNecesario) {
                const faltante = fondoEmergenciaNecesario - efectivoActual;
                recomendaciones.push(`Aumenta tu fondo de emergencia en ${faltante.toLocaleString()}‚Ç¨. Tu fondo actual cubre solo ${Math.round((efectivoActual / gastosMensuales) * 10) / 10} meses.`);
            }

            // Diversificaci√≥n
            const numInversiones = Object.values(distribucionPorcentaje).filter(val => val > 0).length;
            if (numInversiones < 4) {
                recomendaciones.push('Considera diversificar m√°s tu cartera incluyendo diferentes tipos de activos para reducir el riesgo.');
            }

            // Renta variable
            if (distribucionPorcentaje.rentaVariable < 20) {
                recomendaciones.push('Un mayor porcentaje en renta variable podr√≠a mejorar el crecimiento a largo plazo de tu patrimonio.');
            } else if (distribucionPorcentaje.rentaVariable > 70) {
                recomendaciones.push('Tu exposici√≥n a renta variable es muy alta. Considera reducirla para mayor estabilidad.');
            }

            // Criptomonedas
            if (distribucionPorcentaje.criptomonedas > 10) {
                recomendaciones.push('Tu exposici√≥n a criptomonedas es elevada. Se recomienda mantenerla por debajo del 5-10% del patrimonio total.');
            }

            // Efectivo excesivo
            if (efectivoActual > fondoEmergenciaNecesario * 1.5) {
                const exceso = efectivoActual - fondoEmergenciaNecesario;
                recomendaciones.push(`Tienes ${exceso.toLocaleString()}‚Ç¨ en exceso en efectivo. Considera invertir este dinero para generar mayor rentabilidad.`);
            }

            // Rentabilidades poco realistas
            if (yields.cuentaRemunerada > 5) {
                recomendaciones.push(`La rentabilidad de tu cuenta remunerada (${yields.cuentaRemunerada}%) parece muy alta. Las cuentas remuneradas suelen dar entre 2-4%.`);
            }
            if (yields.rentaVariable > 12) {
                recomendaciones.push(`La rentabilidad esperada de renta variable (${yields.rentaVariable}%) es muy optimista. Considera usar 7-10% para ser m√°s conservador.`);
            }

            // Cuenta corriente con dinero insuficiente
            if (distribucion.cuentaCorriente < gastosMensuales * 0.5) {
                recomendaciones.push(`Tu cuenta corriente deber√≠a tener al menos medio mes de gastos (${(gastosMensuales * 0.5).toLocaleString()}‚Ç¨) para gastos diarios.`);
            }

            // Recomendaciones basadas en m√©tricas
            if (metricas.tasaAhorro < 10) {
                recomendaciones.push('Tu tasa de ahorro es muy baja. Intenta reducir gastos o aumentar ingresos para mejorar tu capacidad de inversi√≥n.');
            } else if (metricas.tasaAhorro > 50) {
                recomendaciones.push('Tu tasa de ahorro es excelente, pero aseg√∫rate de mantener un equilibrio con tu calidad de vida.');
            }

            if (metricas.utilizacionCapacidad < 50 && metricas.capacidadInversion > 0) {
                recomendaciones.push(`Est√°s utilizando solo el ${metricas.utilizacionCapacidad.toFixed(1)}% de tu capacidad de inversi√≥n. Podr√≠as invertir hasta ${metricas.capacidadInversion.toLocaleString()}‚Ç¨/mes.`);
            }

            return recomendaciones;
        }

        function analizarDCA(dca, dcaDistr, patrimonio, preferencia, yields) {
            if (dca === 0) {
                return {
                    mensaje: 'No tienes configurado un plan de DCA (Dollar Cost Averaging). Te recomendamos establecer una inversi√≥n mensual autom√°tica.',
                    recomendacion: 'Un DCA del 10-20% de tus ingresos netos puede ser un buen punto de partida.',
                    distribucion: null
                };
            }

            const porcentajePatrimonio = (dca * 12 / patrimonio) * 100;
            
            let distribucionTexto = '';
            let rentabilidadDCA = 0;
            
            if (Object.keys(dcaDistr).length > 0 && Object.values(dcaDistr).some(val => val > 0)) {
                distribucionTexto = '<h5>üìã Tu distribuci√≥n DCA:</h5><ul>';
                const labels = {
                    cuentaRemunerada: 'Cuenta Remunerada',
                    rentaFija: 'Renta Fija',
                    rentaVariable: 'Renta Variable',
                    inmobiliario: 'Inmobiliario',
                    criptomonedas: 'Criptomonedas'
                };
                
                for (let key in dcaDistr) {
                    if (dcaDistr[key] > 0) {
                        const porcentajeDCA = (dcaDistr[key] / dca) * 100;
                        const yieldKey = 'yield' + key.charAt(0).toUpperCase() + key.slice(1);
                        const yieldValue = yields[key] || 0;
                        rentabilidadDCA += (porcentajeDCA * yieldValue) / 100;
                        
                        distribucionTexto += `<li>${labels[key]}: ${dcaDistr[key]}‚Ç¨/mes (${porcentajeDCA.toFixed(1)}%) - ${yieldValue}% rentabilidad</li>`;
                    }
                }
                distribucionTexto += '</ul>';
                rentabilidadDCA = rentabilidadDCA / 100; // Convertir a decimal
            }
            
            return {
                mensaje: `Tu DCA mensual de ${dca.toLocaleString()}‚Ç¨ representa un ${porcentajePatrimonio.toFixed(1)}% de crecimiento anual respecto a tu patrimonio actual.`,
                proyeccion: calcularProyeccionDCA(patrimonio, dca, rentabilidadDCA > 0 ? rentabilidadDCA : 0.07),
                recomendacion: porcentajePatrimonio < 5 ? 'Considera aumentar tu DCA para acelerar el crecimiento de tu patrimonio.' : 'Tu estrategia de DCA est√° bien dimensionada.',
                distribucion: distribucionTexto,
                rentabilidadEsperada: rentabilidadDCA > 0 ? `${(rentabilidadDCA * 100).toFixed(2)}%` : '7% (promedio estimado)'
            };
        }

        function calcularProyeccionDCA(patrimonioInicial, dcaMensual, rentabilidadAnual) {
            const proyeccion = [];
            let patrimonio = patrimonioInicial;
            
            for (let a√±o = 0; a√±o <= 10; a√±o++) {
                proyeccion.push({
                    a√±o: a√±o,
                    patrimonio: Math.round(patrimonio),
                    aportaciones: dcaMensual * 12 * a√±o
                });
                
                patrimonio = patrimonio * (1 + rentabilidadAnual) + (dcaMensual * 12);
            }
            
            return proyeccion;
        }

        function generarOpinionInversion(preferencia, distribucionPorcentaje, yields) {
            const opiniones = {
                'renta-variable': {
                    titulo: 'üìà Renta Variable - Excelente para el crecimiento',
                    opinion: 'Tu preferencia por la renta variable es muy acertada para el crecimiento a largo plazo. Los fondos indexados y acciones han demostrado ser una de las mejores formas de hacer crecer el patrimonio.',
                    pros: ['Mayor potencial de crecimiento', 'Protecci√≥n contra la inflaci√≥n', 'Liquidez alta', 'Diversificaci√≥n f√°cil con ETFs'],
                    contras: ['Mayor volatilidad a corto plazo', 'Requiere horizonte temporal largo', 'Riesgo de p√©rdidas'],
                    recomendacion: `Tu asignaci√≥n actual del ${distribucionPorcentaje.rentaVariable.toFixed(1)}% est√° ${distribucionPorcentaje.rentaVariable >= 30 ? 'bien dimensionada' : 'por debajo de lo √≥ptimo para tu preferencia'}. Con una rentabilidad esperada del ${yields.rentaVariable}%, ${yields.rentaVariable > 10 ? 'considera ser m√°s conservador (7-10%)' : 'parece realista'}.`
                },
                'renta-fija': {
                    titulo: 'üèõÔ∏è Renta Fija - Estabilidad y predictibilidad',
                    opinion: 'La renta fija ofrece estabilidad y es una excelente base para cualquier cartera. Es especialmente valiosa en entornos de tipos altos.',
                    pros: ['Mayor estabilidad', 'Ingresos predecibles', 'Menor correlaci√≥n con acciones', 'Preservaci√≥n de capital'],
                    contras: ['Menor crecimiento a largo plazo', 'Riesgo de inflaci√≥n', 'Riesgo de tipos de inter√©s'],
                    recomendacion: `Tu asignaci√≥n del ${distribucionPorcentaje.rentaFija.toFixed(1)}% es ${distribucionPorcentaje.rentaFija >= 20 ? 'apropiada' : 'algo baja'} para tu preferencia conservadora. La rentabilidad del ${yields.rentaFija}% ${yields.rentaFija > 5 ? 'parece algo alta para el entorno actual' : 'es realista'}.`
                },
                'inmobiliario': {
                    titulo: 'üè† Inmobiliario - Diversificaci√≥n y rentas',
                    opinion: 'El inmobiliario es un excelente diversificador y generador de rentas. Los REITs pueden ser una forma eficiente de acceder a este mercado.',
                    pros: ['Diversificaci√≥n vs acciones/bonos', 'Generaci√≥n de rentas', 'Protecci√≥n contra inflaci√≥n', 'Activo tangible'],
                    contras: ['Menor liquidez', 'Concentraci√≥n geogr√°fica', 'Costes de transacci√≥n altos', 'Gesti√≥n requerida'],
                    recomendacion: `Tu ${distribucionPorcentaje.inmobiliario.toFixed(1)}% en inmobiliario ${distribucionPorcentaje.inmobiliario >= 10 ? 'est√° bien para diversificaci√≥n' : 'podr√≠a aumentarse gradualmente'}. La rentabilidad esperada del ${yields.inmobiliario}% es ${yields.inmobiliario > 8 ? 'optimista' : 'razonable'}.`
                },
                'criptomonedas': {
                    titulo: '‚Çø Criptomonedas - Alto riesgo, alto potencial',
                    opinion: 'Las criptomonedas pueden ofrecer alto potencial de crecimiento, pero son muy vol√°tiles. Se recomienda mantener una exposici√≥n limitada.',
                    pros: ['Alto potencial de crecimiento', 'Diversificaci√≥n vs activos tradicionales', 'Liquidez 24/7', 'Innovaci√≥n tecnol√≥gica'],
                    contras: ['Extrema volatilidad', 'Regulaci√≥n incierta', 'Riesgo tecnol√≥gico', 'Mercado especulativo'],
                    recomendacion: `Tu ${distribucionPorcentaje.criptomonedas.toFixed(1)}% ${distribucionPorcentaje.criptomonedas <= 5 ? 'est√° dentro del rango recomendado' : 'es bastante alto para este activo tan vol√°til'}. La rentabilidad esperada del ${yields.criptomonedas}% refleja la volatilidad del sector.`
                },
                'diversificado': {
                    titulo: 'üéØ Portfolio Diversificado - La estrategia equilibrada',
                    opinion: 'Un enfoque diversificado es la estrategia m√°s prudente. Reduces riesgos manteniendo potencial de crecimiento.',
                    pros: ['Riesgo reducido', 'Estabilidad', 'Adaptabilidad', 'Menor necesidad de timing'],
                    contras: ['Crecimiento potencial limitado', 'Mayor complejidad', 'Costes de rebalanceo'],
                    recomendacion: 'Tu estrategia diversificada es s√≥lida. Mant√©n el rebalanceo peri√≥dico para optimizar resultados.'
                }
            };

            return opiniones[preferencia] || opiniones['diversificado'];
        }

        function mostrarResultados(analysis) {
            // Mostrar secci√≥n de resultados
            document.getElementById('resultados').classList.remove('hidden');
            document.getElementById('resultados').classList.add('fade-in');

            // Puntuaci√≥n
            document.getElementById('scoreNumber').textContent = analysis.score;
            const scoreCard = document.querySelector('.score-card');
            if (analysis.score >= 80) {
                scoreCard.style.background = 'linear-gradient(135deg, #11998e 0%, #38ef7d 100%)';
            } else if (analysis.score >= 60) {
                scoreCard.style.background = 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)';
            } else {
                scoreCard.style.background = 'linear-gradient(135deg, #ff6b6b 0%, #ffa726 100%)';
            }

            // Estado del fondo de emergencia
            mostrarEstadoFondoEmergencia(analysis);

            // Distribuci√≥n del patrimonio
            mostrarDistribucionPatrimonio(analysis);

            // Recomendaciones
            mostrarRecomendaciones(analysis.recommendations);

            // An√°lisis DCA
            mostrarAnalisisDCA(analysis.dcaAnalysis);

            // Opini√≥n sobre inversi√≥n
            mostrarOpinionInversion(analysis.investmentOpinion);

            // Mostrar an√°lisis de independencia financiera
            mostrarIndependenciaFinanciera(analysis.independencia);

            // Mostrar m√©tricas clave
            mostrarMetricas(analysis.metricas);

            // Gr√°fico de crecimiento
            mostrarGraficoCrecimiento(analysis);

            // Scroll a resultados
            document.getElementById('resultados').scrollIntoView({ behavior: 'smooth' });
        }

        function mostrarEstadoFondoEmergencia(analysis) {
            const container = document.getElementById('emergencyFundStatus');
            const coberturaMeses = analysis.efectivoActual / analysis.gastosMensuales;
            
            let statusClass = 'danger';
            let statusIcon = '‚ö†Ô∏è';
            let statusText = 'Insuficiente';
            
            if (analysis.efectivoActual >= analysis.fondoEmergenciaNecesario) {
                statusClass = '';
                statusIcon = '‚úÖ';
                statusText = 'Adecuado';
            } else if (analysis.efectivoActual >= analysis.fondoEmergenciaNecesario * 0.7) {
                statusClass = 'warning';
                statusIcon = '‚ö°';
                statusText = 'Mejorable';
            }

            container.innerHTML = `
                <div class="emergency-fund-status ${statusClass}">
                    <div>
                        <h4>${statusIcon} Fondo de Emergencia: ${statusText}</h4>
                        <p><strong>Efectivo actual:</strong> ${analysis.efectivoActual.toLocaleString()}‚Ç¨</p>
                        <p><strong>Recomendado:</strong> ${analysis.fondoEmergenciaNecesario.toLocaleString()}‚Ç¨</p>
                        <p><strong>Cobertura:</strong> ${coberturaMeses.toFixed(1)} meses</p>
                    </div>
                    <div style="font-size: 3rem;">${Math.round((analysis.efectivoActual / analysis.fondoEmergenciaNecesario) * 100)}%</div>
                </div>
            `;
        }

        function mostrarDistribucionPatrimonio(analysis) {
            const container = document.getElementById('allocationGrid');
            const labels = {
                cuentaCorriente: 'Cuenta Corriente',
                cuentaRemunerada: 'Cuenta Remunerada',
                rentaFija: 'Renta Fija',
                rentaVariable: 'Renta Variable',
                inmobiliario: 'Inmobiliario',
                criptomonedas: 'Criptomonedas'
            };

            container.innerHTML = '';
            
            for (let key in analysis.distribucion) {
                if (analysis.distribucion[key] > 0) {
                    const div = document.createElement('div');
                    div.className = 'allocation-item';
                    div.innerHTML = `
                        <h4>${labels[key]}</h4>
                        <div class="amount">${analysis.distribucion[key].toLocaleString()}‚Ç¨</div>
                        <div class="percentage">${analysis.distribucionPorcentaje[key].toFixed(1)}%</div>
                        <div class="yield">${analysis.yields[key]}% rentabilidad</div>
                    `;
                    container.appendChild(div);
                }
            }

            // Gr√°fico de distribuci√≥n
            mostrarGraficoDistribucion(analysis);
        }

        function mostrarGraficoDistribucion(analysis) {
            const ctx = document.getElementById('allocationChart').getContext('2d');
            
            if (allocationChart) {
                allocationChart.destroy();
            }

            const labels = [];
            const data = [];
            const colors = ['#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF', '#FF9F40'];
            
            const labelMap = {
                cuentaCorriente: 'Cuenta Corriente',
                cuentaRemunerada: 'Cuenta Remunerada',
                rentaFija: 'Renta Fija',
                rentaVariable: 'Renta Variable',
                inmobiliario: 'Inmobiliario',
                criptomonedas: 'Criptomonedas'
            };

            let colorIndex = 0;
            for (let key in analysis.distribucionPorcentaje) {
                if (analysis.distribucionPorcentaje[key] > 0) {
                    labels.push(labelMap[key]);
                    data.push(analysis.distribucionPorcentaje[key]);
                    colorIndex++;
                }
            }

            allocationChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: labels,
                    datasets: [{
                        data: data,
                        backgroundColor: colors.slice(0, labels.length),
                        borderWidth: 2,
                        borderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                font: {
                                    size: 12
                                }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.label;
                                    const value = context.parsed;
                                    const amount = analysis.distribucion[Object.keys(analysis.distribucion)[context.dataIndex]];
                                    return `${label}: ${value.toFixed(1)}% (${amount.toLocaleString()}‚Ç¨)`;
                                }
                            }
                        }
                    }
                }
            });
        }

        function mostrarRecomendaciones(recommendations) {
            const container = document.getElementById('recommendations');
            
            if (recommendations.length === 0) {
                container.innerHTML = `
                    <div class="recommendation">
                        <h4>üéâ ¬°Felicitaciones!</h4>
                        <p>Tu distribuci√≥n patrimonial est√° muy bien optimizada. Mant√©n el rumbo y revisa peri√≥dicamente.</p>
                    </div>
                `;
                return;
            }

            let html = '<div class="recommendation"><h4>üí° Recomendaciones para optimizar tu patrimonio:</h4><ul>';
            recommendations.forEach(rec => {
                html += `<li>${rec}</li>`;
            });
            html += '</ul></div>';
            
            container.innerHTML = html;
        }

        function mostrarAnalisisDCA(dcaAnalysis) {
            const container = document.getElementById('dcaAnalysis');
            
            container.innerHTML = `
                <div class="dca-info" style="background: linear-gradient(135deg, #d299c2 0%, #fef9d7 100%); padding: 25px; border-radius: 15px; margin: 20px 0;">
                    <h4>üìä Tu estrategia DCA</h4>
                    <p>${dcaAnalysis.mensaje}</p>
                    ${dcaAnalysis.distribucion ? `<div style="margin: 15px 0;">${dcaAnalysis.distribucion}</div>` : ''}
                    ${dcaAnalysis.rentabilidadEsperada ? `<p><strong>üéØ Rentabilidad esperada DCA:</strong> ${dcaAnalysis.rentabilidadEsperada} anual</p>` : ''}
                    <p><strong>üí° ${dcaAnalysis.recomendacion}</strong></p>
                    ${dcaAnalysis.proyeccion ? `
                        <div style="margin-top: 15px; padding: 15px; background: rgba(255,255,255,0.7); border-radius: 10px;">
                            <h5>üìà Proyecci√≥n a 10 a√±os:</h5>
                            <p>Patrimonio proyectado: <strong>${dcaAnalysis.proyeccion[10].patrimonio.toLocaleString()}‚Ç¨</strong></p>
                            <p>Total aportado: <strong>${dcaAnalysis.proyeccion[10].aportaciones.toLocaleString()}‚Ç¨</strong></p>
                            <p>Ganancia proyectada: <strong>${(dcaAnalysis.proyeccion[10].patrimonio - dcaAnalysis.proyeccion[0].patrimonio - dcaAnalysis.proyeccion[10].aportaciones).toLocaleString()}‚Ç¨</strong></p>
                        </div>
                    ` : ''}
                </div>
            `;
        }

        function mostrarOpinionInversion(opinion) {
            const container = document.getElementById('investmentOpinion');
            
            container.innerHTML = `
                <div class="recommendation">
                    <h4>${opinion.titulo}</h4>
                    <p>${opinion.opinion}</p>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                        <div>
                            <h5 style="color: #28a745; margin-bottom: 10px;">‚úÖ Ventajas:</h5>
                            <ul>
                                ${opinion.pros.map(pro => `<li>${pro}</li>`).join('')}
                            </ul>
                        </div>
                        <div>
                            <h5 style="color: #dc3545; margin-bottom: 10px;">‚ö†Ô∏è Desventajas:</h5>
                            <ul>
                                ${opinion.contras.map(contra => `<li>${contra}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                    
                    <div style="background: rgba(102, 126, 234, 0.1); padding: 15px; border-radius: 10px; margin-top: 15px;">
                        <strong>üìã Mi recomendaci√≥n:</strong> ${opinion.recomendacion}
                    </div>
                </div>
            `;
        }

        function mostrarGraficoCrecimiento(analysis) {
            const ctx = document.getElementById('growthChart').getContext('2d');
            
            if (growthChart) {
                growthChart.destroy();
            }

            // Generar proyecci√≥n de crecimiento con rentabilidad real
            const proyeccion = [];
            let patrimonio = analysis.patrimonio;
            const rentabilidadPonderada = analysis.rentabilidadPonderada;
            const inflacion = analysis.inflacion;
            
            for (let a√±o = 0; a√±o <= 15; a√±o++) {
                proyeccion.push({
                    a√±o: a√±o,
                    patrimonio: patrimonio,
                    patrimonioReal: patrimonio / Math.pow(1 + inflacion, a√±o), // Ajustado por inflaci√≥n
                    conDCA: a√±o === 0 ? patrimonio : proyeccion[a√±o-1].conDCA * (1 + rentabilidadPonderada) + (analysis.dca * 12)
                });
                
                patrimonio = patrimonio * (1 + rentabilidadPonderada);
            }

            const labels = proyeccion.map(p => p.a√±o);
            const dataPatrimonio = proyeccion.map(p => p.patrimonio);
            const dataConDCA = proyeccion.map(p => p.conDCA);
            const dataReal = proyeccion.map(p => p.patrimonioReal);

            growthChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: `Sin DCA (${(rentabilidadPonderada * 100).toFixed(1)}% anual)`,
                            data: dataPatrimonio,
                            borderColor: '#36A2EB',
                            backgroundColor: 'rgba(54, 162, 235, 0.1)',
                            tension: 0.4,
                            fill: false
                        },
                        {
                            label: `Con DCA ${analysis.dca}‚Ç¨/mes`,
                            data: dataConDCA,
                            borderColor: '#4BC0C0',
                            backgroundColor: 'rgba(75, 192, 192, 0.1)',
                            tension: 0.4,
                            fill: false
                        },
                        {
                            label: 'Poder Adquisitivo Real',
                            data: dataReal,
                            borderColor: '#FF6384',
                            backgroundColor: 'rgba(255, 99, 132, 0.1)',
                            tension: 0.4,
                            fill: false,
                            borderDash: [5, 5]
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                font: {
                                    size: 11
                                }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': ' + context.parsed.y.toLocaleString() + '‚Ç¨';
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            ticks: {
                                callback: function(value) {
                                    return value.toLocaleString() + '‚Ç¨';
                                }
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'A√±os'
                            }
                        }
                    },
                    interaction: {
                        intersect: false,
                        mode: 'index'
                    }
                }
            });
        }

        function mostrarMetricas(metricas) {
            const container = document.getElementById('metricas');
            
            const metricasData = [
                {
                    titulo: 'Tasa de Ahorro',
                    valor: `${metricas.tasaAhorro.toFixed(1)}%`,
                    descripcion: metricas.tasaAhorro >= 20 ? 'Excelente' : metricas.tasaAhorro >= 10 ? 'Buena' : 'Mejorable',
                    color: metricas.tasaAhorro >= 20 ? '#28a745' : metricas.tasaAhorro >= 10 ? '#ffc107' : '#dc3545'
                },
                {
                    titulo: 'Rentabilidad Real',
                    valor: `${metricas.rentabilidadReal.toFixed(2)}%`,
                    descripcion: 'Descontando inflaci√≥n',
                    color: metricas.rentabilidadReal > 3 ? '#28a745' : metricas.rentabilidadReal > 0 ? '#ffc107' : '#dc3545'
                },
                {
                    titulo: 'M√∫ltiplo por Ingresos',
                    valor: `${metricas.multiploPorIngresos.toFixed(1)}x`,
                    descripcion: 'Patrimonio/Ingresos anuales',
                    color: metricas.multiploPorIngresos >= 5 ? '#28a745' : metricas.multiploPorIngresos >= 2 ? '#ffc107' : '#dc3545'
                },
                {
                    titulo: 'A√±os para Duplicar',
                    valor: metricas.yearsToDoubleWealth > 0 ? `${metricas.yearsToDoubleWealth.toFixed(1)} a√±os` : 'N/A',
                    descripcion: 'Con rentabilidad actual',
                    color: metricas.yearsToDoubleWealth < 10 ? '#28a745' : metricas.yearsToDoubleWealth < 15 ? '#ffc107' : '#dc3545'
                },
                {
                    titulo: 'Capacidad Inversi√≥n',
                    valor: `${metricas.capacidadInversion.toLocaleString()}‚Ç¨/mes`,
                    descripcion: 'Ingresos - Gastos',
                    color: '#667eea'
                },
                {
                    titulo: 'Utilizaci√≥n DCA',
                    valor: `${metricas.utilizacionCapacidad.toFixed(1)}%`,
                    descripcion: 'De tu capacidad total',
                    color: metricas.utilizacionCapacidad >= 80 ? '#28a745' : metricas.utilizacionCapacidad >= 50 ? '#ffc107' : '#dc3545'
                }
            ];

            container.innerHTML = '';
            
            metricasData.forEach(metrica => {
                const div = document.createElement('div');
                div.className = 'allocation-item';
                div.style.background = `linear-gradient(135deg, ${metrica.color}20, ${metrica.color}40)`;
                div.style.color = '#333';
                div.style.border = `2px solid ${metrica.color}`;
                div.innerHTML = `
                    <h4>${metrica.titulo}</h4>
                    <div class="amount" style="color: ${metrica.color};">${metrica.valor}</div>
                    <div class="percentage">${metrica.descripcion}</div>
                `;
                container.appendChild(div);
            });
        }

        function mostrarIndependenciaFinanciera(independencia) {
            const container = document.getElementById('independenciaFinanciera');
            
            container.innerHTML = `
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 25px; border-radius: 15px; margin: 20px 0;">
                    <h4>üèñÔ∏è An√°lisis FIRE (Financial Independence, Retire Early)</h4>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 20px 0;">
                        <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 10px;">
                            <h5>üí∞ Patrimonio FIRE</h5>
                            <p style="font-size: 1.2rem; margin: 5px 0;"><strong>${independencia.patrimonioFIRE.toLocaleString()}‚Ç¨</strong></p>
                            <small>Regla del 4% (25x gastos anuales)</small>
                        </div>
                        <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 10px;">
                            <h5>üìä Progreso FIRE</h5>
                            <p style="font-size: 1.2rem; margin: 5px 0;"><strong>${independencia.porcentajeFIRE.toFixed(1)}%</strong></p>
                            <small>Del objetivo alcanzado</small>
                        </div>
                        <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 10px;">
                            <h5‚è∞ Tiempo hasta FIRE</h5>
                            <p style="font-size: 1.2rem; margin: 5px 0;"><strong>${independencia.a√±osHastaFIRE ? independencia.a√±osHastaFIRE + ' a√±os' : 'N/A'}</strong></p>
                            <small>${independencia.edadFIRE ? 'A los ' + independencia.edadFIRE + ' a√±os' : 'Con DCA actual'}</small>
                        </div>
                        <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 10px;">
                            <h5>üí∏ Renta Pasiva Actual</h5>
                            <p style="font-size: 1.2rem; margin: 5px 0;"><strong>${independencia.rentaAnualPasiva.toLocaleString()}‚Ç¨/a√±o</strong></p>
                            <small>${(independencia.rentaAnualPasiva/12).toLocaleString()}‚Ç¨/mes</small>
                        </div>
                    </div>
                    
                    ${independencia.objetivoJubilacion > 0 ? `
                        <div style="margin-top: 20px; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 10px;">
                            <h5>üéØ Tu Objetivo Personal: ${independencia.objetivoJubilacion.toLocaleString()}‚Ç¨</h5>
                            <p>
                                ${independencia.a√±osHastaObjetivo ? 
                                    `Tiempo estimado: <strong>${independencia.a√±osHastaObjetivo} a√±os</strong> (a los ${independencia.edadObjetivo} a√±os)` :
                                    'Con tu DCA actual, este objetivo podr√≠a ser dif√≠cil de alcanzar. Considera aumentar tu inversi√≥n mensual.'
                                }
                            </p>
                        </div>
                    ` : ''}
                </div>
            `;
        }

        // Funci√≥n para simular escenarios
        window.simularEscenario = function(tipo) {
            const resultadoContainer = document.getElementById('resultadoEscenario');
            
            // Obtener datos actuales
            const patrimonioActual = parseFloat(document.getElementById('cuentaCorriente').value || 0) +
                                   parseFloat(document.getElementById('cuentaRemunerada').value || 0) +
                                   parseFloat(document.getElementById('rentaFija').value || 0) +
                                   parseFloat(document.getElementById('rentaVariable').value || 0) +
                                   parseFloat(document.getElementById('inmobiliario').value || 0) +
                                   parseFloat(document.getElementById('criptomonedas').value || 0);
            
            const dcaActual = parseFloat(document.getElementById('dcaAmount').value || 0);
            
            // Calcular rentabilidad base
            let rentabilidadBase = 0;
            const distribuciones = ['cuentaCorriente', 'cuentaRemunerada', 'rentaFija', 'rentaVariable', 'inmobiliario', 'criptomonedas'];
            distribuciones.forEach(id => {
                const valor = parseFloat(document.getElementById(id).value || 0);
                const yield = parseFloat(document.getElementById('yield' + id.charAt(0).toUpperCase() + id.slice(1)).value || 0);
                rentabilidadBase += (valor / patrimonioActual) * (yield / 100);
            });
            
            let escenario = {};
            
            switch(tipo) {
                case 'optimista':
                    escenario = {
                        titulo: 'üìà Escenario Optimista',
                        descripcion: 'Rentabilidades 2% superiores a las actuales',
                        rentabilidad: rentabilidadBase + 0.02,
                        patrimonioInicial: patrimonioActual,
                        color: '#28a745'
                    };
                    break;
                case 'pesimista':
                    escenario = {
                        titulo: 'üìâ Escenario Pesimista',
                        descripcion: 'Rentabilidades 2% inferiores a las actuales',
                        rentabilidad: Math.max(0, rentabilidadBase - 0.02),
                        patrimonioInicial: patrimonioActual,
                        color: '#dc3545'
                    };
                    break;
                case 'crisis':
                    escenario = {
                        titulo: 'üí• Escenario de Crisis',
                        descripcion: 'Ca√≠da inicial del 50% + recuperaci√≥n gradual',
                        rentabilidad: rentabilidadBase * 0.5,
                        patrimonioInicial: patrimonioActual * 0.5,
                        color: '#ff6b6b'
                    };
                    break;
            }
            
            // Calcular proyecci√≥n del escenario
            const proyeccion = [];
            let patrimonio = escenario.patrimonioInicial;
            
            for (let a√±o = 0; a√±o <= 10; a√±o++) {
                proyeccion.push({
                    a√±o,
                    patrimonio: Math.round(patrimonio)
                });
                patrimonio = patrimonio * (1 + escenario.rentabilidad) + (dcaActual * 12);
            }
            
            const patrimonioFinal = proyeccion[10].patrimonio;
            const diferencia = patrimonioFinal - patrimonioActual;
            const rentabilidadTotal = ((patrimonioFinal / patrimonioActual) - 1) * 100;
            
            resultadoContainer.innerHTML = `
                <div style="background: ${escenario.color}20; border: 2px solid ${escenario.color}; padding: 20px; border-radius: 15px; margin-top: 15px;">
                    <h4 style="color: ${escenario.color};">${escenario.titulo}</h4>
                    <p>${escenario.descripcion}</p>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin: 15px 0;">
                        <div>
                            <strong>Patrimonio inicial:</strong><br>
                            ${escenario.patrimonioInicial.toLocaleString()}‚Ç¨
                        </div>
                        <div>
                            <strong>Patrimonio en 10 a√±os:</strong><br>
                            ${patrimonioFinal.toLocaleString()}‚Ç¨
                        </div>
                        <div>
                            <strong>Crecimiento total:</strong><br>
                            ${diferencia.toLocaleString()}‚Ç¨ (${rentabilidadTotal.toFixed(1)}%)
                        </div>
                        <div>
                            <strong>Rentabilidad anual:</strong><br>
                            ${(escenario.rentabilidad * 100).toFixed(2)}%
                        </div>
                    </div>
                </div>
            `;
            
            resultadoContainer.classList.remove('hidden');
        };

        // Animaci√≥n de n√∫meros
        function animateNumber(element, targetNumber, duration = 1500) {
            const startNumber = 0;
            const increment = targetNumber / (duration / 16);
            let current = startNumber;
            
            const timer = setInterval(() => {
                current += increment;
                if (current >= targetNumber) {
                    current = targetNumber;
                    clearInterval(timer);
                }
                element.textContent = Math.round(current);
            }, 16);
        }

        // Mejorar la animaci√≥n del score
        const originalMostrarResultados = mostrarResultados;
        mostrarResultados = function(analysis) {
            originalMostrarResultados(analysis);
            
            // Animar el score
            setTimeout(() => {
                const scoreElement = document.getElementById('scoreNumber');
                animateNumber(scoreElement, analysis.score, 1500);
            }, 500);
        };

        // Auto-completar ejemplo al cargar la p√°gina
        document.addEventListener('DOMContentLoaded', function() {
            // Rellenar ejemplo autom√°ticamente para demostraci√≥n
            setTimeout(() => {
                document.getElementById('gastosMensuales').value = '2500';
                document.getElementById('dcaAmount').value = '500';
                document.getElementById('inflacion').value = '3.5';
                
                // Nuevos campos
                document.getElementById('ingresosMensuales').value = '4000';
                document.getElementById('edadActual').value = '35';
                document.getElementById('objetivoJubilacion').value = '800000';
                
                // Patrimonio de ejemplo
                document.getElementById('cuentaCorriente').value = '5000';
                document.getElementById('cuentaRemunerada').value = '12000';
                document.getElementById('rentaFija').value = '15000';
                document.getElementById('rentaVariable').value = '25000';
                document.getElementById('inmobiliario').value = '8000';
                document.getElementById('criptomonedas').value = '2000';
                
                // Actualizar indicador de patrimonio total
                actualizarPatrimonioTotal();
                
                // Configurar DCA de ejemplo
                dcaDistribution = {
                    cuentaRemunerada: 50,
                    rentaFija: 100,
                    rentaVariable: 300,
                    inmobiliario: 50,
                    criptomonedas: 0
                };
                
                // Mostrar indicador DCA
                const indicator = document.getElementById('dcaIndicator');
                const amount = document.getElementById('dcaConfiguredAmount');
                indicator.classList.remove('hidden');
                amount.textContent = '500‚Ç¨';
                
            }, 1000);
        });

        // Smooth scroll mejorado para enlaces internos
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Prevenir env√≠o accidental del formulario con Enter
        document.getElementById('patrimonioForm').addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && e.target.tagName !== 'BUTTON') {
                e.preventDefault();
            }
        });

        // Validaci√≥n en tiempo real para campos num√©ricos
        function validarCampoNumerico(input) {
            const valor = parseFloat(input.value);
            if (valor < 0) {
                input.value = 0;
            }
        }

        // Aplicar validaci√≥n a todos los inputs num√©ricos
        document.querySelectorAll('input[type="number"]').forEach(input => {
            input.addEventListener('blur', function() {
                validarCampoNumerico(this);
            });
            
            input.addEventListener('input', function() {
                // Actualizar patrimonio total si es necesario
                if (patrimonioInputs.includes(this.id)) {
                    actualizarPatrimonioTotal();
                }
            });
        });

        // Funci√≥n para resetear formulario
        function resetearFormulario() {
            document.getElementById('patrimonioForm').reset();
            dcaDistribution = {};
            document.getElementById('dcaIndicator').classList.add('hidden');
            document.getElementById('totalPatrimonioIndicator').classList.add('hidden');
            document.getElementById('resultados').classList.add('hidden');
            
            // Resetear gr√°ficos
            if (growthChart) {
                growthChart.destroy();
                growthChart = null;
            }
            if (allocationChart) {
                allocationChart.destroy();
                allocationChart = null;
            }
        }

        // A√±adir bot√≥n de reset (opcional)
        function a√±adirBotonReset() {
            const resetButton = document.createElement('button');
            resetButton.type = 'button';
            resetButton.className = 'btn-secondary';
            resetButton.textContent = 'üîÑ Resetear formulario';
            resetButton.style.marginTop = '10px';
            resetButton.onclick = resetearFormulario;
            
            const form = document.getElementById('patrimonioForm');
            form.appendChild(resetButton);
        }

        // Llamar funci√≥n para a√±adir bot√≥n reset al cargar
        document.addEventListener('DOMContentLoaded', function() {
            a√±adirBotonReset();
        });

        console.log('üöÄ Sistema de Optimizaci√≥n del Patrimonio cargado exitosamente');
        console.log('üí° Funcionalidades disponibles:');
        console.log('  - An√°lisis detallado del patrimonio');
        console.log('  - Configuraci√≥n personalizada de DCA');
        console.log('  - Rentabilidades personalizables por activo');
        console.log('  - Proyecciones de crecimiento con inflaci√≥n');
        console.log('  - Recomendaciones inteligentes');
        console.log('  - Interfaz responsive y moderna');
    </script>
</body>
</html>
